<div class="upload-card">
  <h2>Upload Document</h2>

  <div class="upload-box">
    <label class="upload-label">
      Select File
      <input type="file" (change)="onFileSelected($event)" hidden>
    </label>

    <button
      class="upload-button"
      [disabled]="!selectedFile || selectedGroupIds.length === 0"
      (click)="uploadFile()"
    >
      Upload
    </button>
  </div>
  <div class="upload-helper" *ngIf="!selectedFile">
    Please select a file to begin.
  </div>
  
  <div class="upload-helper" *ngIf="selectedFile && selectedGroupIds.length === 0">
    Please select or create a group to enable upload.
  </div>

  <!-- Show selected filename -->
  <div class="selected-file" *ngIf="selectedFile">
    Selected: {{ selectedFile.name }}
  </div>

  <!-- ðŸ‘‡ Only show group section after file is selected -->
  <div class="group-select" *ngIf="selectedFile">
    <label class="group-label">Select Group(s):</label>
    <select [(ngModel)]="selectedGroupIds" multiple class="group-dropdown">
      <option *ngFor="let group of groups" [value]="group.id">
        {{ group.name }}
      </option>
    </select>
  
    <div class="group-create">
      <input
        type="text"
        [(ngModel)]="newGroupName"
        placeholder="Create new group..."
      />
      <button (click)="createGroup()">Add</button>
    </div>
  </div>  

  <!-- Upload message -->
  <div class="upload-message" *ngIf="uploadMessage">{{ uploadMessage }}</div>
</div>